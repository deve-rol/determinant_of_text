const canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),inputName=document.getElementById("name"),outputs=[document.querySelector(".outputs .output_1"),document.querySelector(".outputs .output_2"),document.querySelector(".outputs .output_3")],columnsCount=20,columnWidth=canvas.width/columnsCount,cashW=localStorage.getItem("w"),w=cashW?JSON.parse(cashW):[];let drawCoords=[];setDrawDefaultCoords();let canvasClicked=!1;function mousedown(){canvasClicked=!0}function mouseup(){canvasClicked=!1}function mousemove(t){if(!canvasClicked)return;const e=getRectByCoords(t.layerX,t.layerY);ctx.fillRect(...e),setDrawCoords(e[0]/columnWidth,e[1]/columnWidth)}function setDrawCoords(t,e){drawCoords[t+e*columnsCount]=1}function getRectByCoords(t,e){return[t=Math.floor(t/columnWidth)*columnWidth,e=Math.floor(e/columnWidth)*columnWidth,columnWidth,columnWidth]}function setGrid(){for(let t=0;t<=canvas.width;t+=columnWidth)ctx.beginPath(),ctx.lineWidth=1,ctx.moveTo(t,0),ctx.lineTo(t,canvas.height),ctx.stroke(),ctx.beginPath(),ctx.moveTo(0,t),ctx.lineTo(canvas.width,t),ctx.stroke()}function reset(){inputName.value="",ctx.save(),ctx.fillStyle="#fff",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.restore(),setDrawDefaultCoords(),setGrid()}function setDrawDefaultCoords(){drawCoords=[];for(let t=0;t<columnsCount**2;t++)drawCoords.push(0)}function learn(){const t=inputName.value,e=w.length?w.map(t=>t.name).indexOf(t):-1;-1===e?w.push({name:t,values:[drawCoords]}):w[e].values.push(drawCoords),localStorage.setItem("w",JSON.stringify(w)),reset()}function check(){let t=[];w.forEach(e=>{const o=[],n=drawCoords.filter(t=>t).length;e.values.forEach(t=>{let e=0;t.forEach((t,o)=>{e+=t===drawCoords[o]&&1===t?1:0});const c=n/100;o.push(e/c)});const c=Math.max(...o);t.push([e.name,c])}),(t=sortByPercent(t)).forEach((t,e)=>{e>2||(outputs[e].innerText=`${t[0]} - ${t[1].toFixed(0)}%`)})}function sortByPercent(t){return t.sort((t,e)=>e[1]-t[1])}setGrid(),canvas.addEventListener("mousedown",mousedown),window.addEventListener("mouseup",mouseup),canvas.addEventListener("mousemove",mousemove);